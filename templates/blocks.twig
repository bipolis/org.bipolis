{# 
# TITLE
#}
{% macro titleBlock (printer, report, iconUrl) -%}
{% set title = default(report.manifest.bundleName,report.commonInfo.name) -%}
{% set title = default(title,report.manifest.bundleSymbolicName.symbolicName) -%}
{% set title = default(title,report.fileName) -%}
{{ printer.printTitle(title,1,iconUrl) -}}
{% endmacro %}

{# 
# OVERVIEW
#}
{% macro overviewBlock (printer, report) -%}
{% set description = default(report.manifest.bundleDescription,report.commonInfo.description) -%}
{% if not empty(description) -%}
{{ description -}}
{% endif -%}
{% endmacro %}

{# 
# DOCUMENTATION
#}
{% macro documentationBlock (printer, report, iconUrl) -%}
{% set docUrl = default(report.manifest.bundleDocURL,report.commonInfo.docURL) -%}
{% if not empty(docUrl) -%}
{{ printer.printTitle('Documentation', 2, iconUrl) }}

Visit [{{ docUrl }}]({{ docUrl }}).
{%- endif -%}
{% endmacro %}

{# 
# SOURCE REPOSITORY
#}
{% macro sourceRepositoryBlock (printer, report, iconUrl) -%}
{% set codeBrowse = default(report.manifest.bundleSCM.url,report.commonInfo.scm.url) -%}
{% set codeDev = default(report.manifest.bundleSCM.developerConnection,report.commonInfo.scm.developerConnection) -%}
{% if not empty(codeBrowse) or not empty(codeDev) -%}
{{ printer.printTitle('Source Repository', 2, iconUrl) }}

{% if empty(codeDev) -%}
**Browse**: [{{ codeBrowse }}]({{ codeBrowse }}).
{%- elseif empty(codeBrowse) -%}
**Clone**: [{{ codeDev }}]({{ codeDev }}).
{%- else -%}
**Browse**: [{{ codeBrowse }}]({{ codeBrowse }}).

**Clone**: [{{ codeDev }}]({{ codeDev }}).
{%- endif -%}
{% endif -%}
{% endmacro %}

{# 
# ARTIFACT REPOSITORY
#}
{% macro artifactRepositoryBlock (printer, report, iconUrl) -%}
{% set download = default(report.manifest.bundleUpdateLocation,report.commonInfo.updateLocation) -%}
{% if not empty(download) -%}
{{ printer.printTitle('Artifact Repository', 2, iconUrl) }}

Visit [{{ download }}]({{ download }}).
{%- endif -%}
{% endmacro %}

{# 
# COORDINATES
#}
{% macro coordinatesBlock (printer, report, iconUrl) -%}
{% if not empty(report.mavenCoordinate) and not empty(report.manifest) -%}
{{ printer.printTitle('Coordinates',2, iconUrl) -}}
{% if not empty(report.mavenCoordinate) %}

{{ printer.printTitle('Maven',3) }}

{{ printer.printMavenCoordinate(report.mavenCoordinate) -}}
{% endif -%}
{% if not empty(report.manifest) %}

{{ printer.printTitle('OSGi',3) }}

{{ printer.printOsgiCoordinate(report.manifest.bundleSymbolicName.symbolicName,report.manifest.bundleVersion) -}}
{% endif -%}
{% endif -%}
{% endmacro %}

{# 
# DEVELOPERS
#}
{% macro developersBlock (printer, report, iconUrl) -%}
{% set developers = default(report.manifest.bundleDevelopers,report.commonInfo.developers) -%}
{% if not empty(developers) -%}
{{ printer.printTitle('Developers',2, iconUrl) }}

{{ printer.printDevelopers(developers) -}}
{% endif -%}
{% endmacro %}

{# 
# LICENSE
#}
{% macro licensesBlock (printer, report, iconUrl) -%}
{% set licenses = default(report.manifest.bundleLicenses,report.commonInfo.licenses) -%}
{% if not empty(licenses) -%}
{{ printer.printTitle('Licenses',2, iconUrl) }}

{{ printer.printLicenses(licenses) -}}
{% endif -%}
{% endmacro %}

{# 
# COPYRIGHT
#}
{% macro copyrightBlock (printer, report, iconUrl) -%}
{% set copyright = default(report.manifest.bundleCopyright,report.commonInfo.copyright) -%}
{% if not empty(copyright) -%}
{{ printer.printTitle('Copyright',2, iconUrl) }}

{{ copyright -}}
{% endif -%}
{% endmacro %}

{# 
# VENDOR
#}
{% macro vendorBlock (printer, report, iconUrl) -%}
{% set vendor = default(report.manifest.bundleVendor,report.commonInfo.vendor) -%}
{% set address = default(report.manifest.bundleContactAddress,report.commonInfo.contactAddress) -%}
{% if not empty(vendor) or not empty(address) %}
---
{% if empty(vendor) -%}
{% if address.type == 'postal' -%}{{ address.address -}}{% else -%}[{{ address.address }}]({{ address.address }}){%- endif -%}
{%- elseif empty(address) -%}
{{ vendor -}}
{%- else -%}
{{ vendor }} - {% if address.type == 'postal' -%}{{ address.address -}}{% else -%}[{{ address.address }}]({{ address.address }}){%- endif -%}
{%- endif -%}
{% endif -%}
{% endmacro %}

{# 
# ARTIFACTS
#}
{% macro artifactsBlock (printer, report, iconUrl) -%}
{% if not empty(report.projects) or length(report.bundles) > 1 -%}
{{ printer.printTitle('Built Artifacts',2, iconUrl) }}

{{ printer.printArtifacts(report) -}}
{% endif -%}
{% endmacro %}

{# 
# CODE USAGE
#}
{% macro codeUsageBlock (printer, report, iconUrl) -%}
{% if not empty(report.codeSnippets) -%}
{{ printer.printTitle('Code Usage',2, iconUrl) }}

{{ printer.printCodeSnippets(report.codeSnippets) -}}
{% endif -%}
{% endmacro %}

{# 
# COMPONENTS
#}
{% macro componentsBlock (printer, report, iconUrl) -%}
{% if not empty(report.components) -%}
{{ printer.printTitle('Components',2, iconUrl) }}

{{ printer.printComponents(report.components, report.metatypes) -}}
{% endif -%}
{% endmacro %}

